#include <stdio.h>
#include <stdlib.h>
#include <sys/time.h>

#define N 1576

int main()
{
	double execTime;
	double startTime, endTime;

	float *A = (float*)malloc(N * N * sizeof(float));
	float *B = (float*)malloc(N * N * sizeof(float));
	float *C = (float*)malloc(N * N * sizeof(float));

	for(int i = 0; i< N * N; i++)
	{
		A[i] = i + 1;
	}

	for(int i = 0; i< N * N; i++)
	{
		B[i] = i + 1;
	}

	double duration = 0.0;
	struct timeval start;

	gettimeofday(&start, NULL);
	startTime = (double)(start.tv_sec + start.tv_usec/1000000.0);

	for(int i = 0; i < N ; i++)
	{
		for(int j = 0; j < N ; j++)
		{
			C[i * N + j] = 0;
			for (int k = 0 ; k < N ; k++)
			{
				C[i * N + j] += A[i * N + k] * B[k * N + j];
			}
		}
	}

	gettimeofday(&start, NULL);
	endTime = (double)(start.tv_sec + start.tv_usec/1000000.0);
	execTime = endTime - startTime;

	printf("Execution time is %2.3f seconds\n", execTime);
	return 0;
}
