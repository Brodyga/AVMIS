#include <stdio.h>
#include <stdlib.h>
#include <iostream>
#include <iomanip>
#include <Windows.h>

using namespace std;

#define N 512

int main()
{
	float *A = (float*)_aligned_malloc(N * N * sizeof(float), 16);
	float *B = (float*)_aligned_malloc(N * N * sizeof(float), 16);
	float *C = (float*)_aligned_malloc(N * N * sizeof(float), 16);

	for(int i = 0; i< N * N; i++)
	{
		A[i] = i + 1;
	}

	for(int i = 0; i< N * N; i++)
	{
		B[i] = i + 1;
	}

	DWORD start = GetTickCount();
	for(int i = 0; i < N ; i++)
	{
		for(int j = 0; j < N ; j++)
		{
			C[i * N + j] = 0;
			for (int k = 0 ; k < N ; k++)
			{
				C[i * N + j] += A[i * N + k] * B[k * N + j];
			}
		}
	}
	double end1 = GetTickCount() - start;
	cout << end1;
	/*
	for(int i = 0; i < N * N; i++)
	{
		if (!(i % N))
		{
			cout << endl;
		}
		cout << C[i] << "\t";
	}*/
	cout << endl;
	system("pause");
	return 0;
}